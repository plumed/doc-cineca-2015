<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>PLUMED: Moving from PLUMED 1 to PLUMED 2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table align="center" frame="void" width="98%" cellpadding="2%">
<tbody>
<tr style="height: 30px;">
<td valign="center"> &nbsp; <img src="pigeon.png" width="120"/></td>
<td style="padding-left: 0.2em;" width="74%"> <a href="http://www.plumed-code.org"> <img src="logo.png" width="400" /> </td>
<td style="padding-left: 0.2em;" align="right"> <a href="../../developer-doc/html/index.html"> <img src="user-logo.png" width="180" /> </a> </td>
</tr>
</tbody>
</table>
<!--
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUMED
   &#160;<span id="projectnumber">2.3.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
-->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home&#160;(cineca-2015)</span></a></li>
      <li><a href="_syntax.html"><span>Getting&#160;started</span></a></li>
      <li><a href="tutorials.html"><span>Tutorials</span></a></li>
      <li><a href="glossary.html"><span>Index&#160;of&#160;Actions</span></a></li>
      <li><a href="cineca.html"><span>Cineca</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('moving.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Moving from PLUMED 1 to PLUMED 2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Syntax in PLUMED 2 has been completely redesigned based on our experience using PLUMED 1, hopefully makeing it clearer, more flexible, and less error prone. The main difference is that whereas in PLUMED 1 lines could be inserted in any order, in PLUMED 2 the order of the lines matters. This is due to a major change in the internal architecture of PLUMED. In version 2, commands (or "actions") are executed in the order they are found in the input file. Because of this, you must e.g. first compute a collective variable and then print it later. More information can be found in the Section about <a class="el" href="_syntax.html">Getting started</a>.</p>
<p>Other important changes are in the way groups and units are used, as discussed below. Finally, many features appear under a different name in the new version.</p>
<h1><a class="anchor" id="moving-Syntax"></a>
New syntax</h1>
<p>We know that changing the input syntax requires a lot of work from the user side to update their input files. However, we believe that the new syntax is easier to read and that it allows for more flexibility. As an example, something that in PLUMED 1.3 was: </p><pre class="fragment">HILLS HEIGHT 0.4 W_STRIDE 600
WELLTEMPERED SIMTEMP 300  BIASFACTOR 15
RGYR LIST &lt;all&gt;
all-&gt;
1   5  6  7   9  11  15  16  17 19
all&lt;-
TORSION LIST 5 7 9 15 SIGMA  0.1
TORSION LIST 7 9 15 17
PRINT W_STRIDE 100
</pre><p> in PLUMED 2.x becomes: </p><pre class="fragment">all:  GROUP     ATOMS=1,5,6,7,9,11,15,16,17,19
rg:   GYRATION  ATOMS=all
t1:   TORSION ATOMS=5,7,9,15
METAD ...
  LABEL=meta
  ARG=t1 SIGMA=0.1 HEIGHT=0.4 PACE=600
  BIASFACTOR=15 TEMP=300
... METAD
t2:   TORSION ATOMS=7,9,15,17
PRINT ARG=t1,t2,meta.bias  STRIDE=100   FILE=COLVAR
</pre><p> Giving all quantities an explicit name makes the input easier to interpret. Additionally, all the parameters related to <a class="el" href="_m_e_t_a_d.html">METAD</a> are placed on a single line (actually, this is done here exploiting continuation lines). Also notice that one can customize the name of the <code>COLVAR</code> file. By specifying to <a class="el" href="_p_r_i_n_t.html">PRINT</a> which collective variables should be printed, one can easily decide what to print exactly and using which stride. By repeating the <a class="el" href="_p_r_i_n_t.html">PRINT</a> line one can also monitor very expensive variables with a larger stride, just putting the result on a separate file.</p>
<p>You might have noticed that ideas that were very difficult to implement in PLUMED 1.3 now become immediately available. As an example, one can now apply concurrently several <a class="el" href="_m_e_t_a_d.html">METAD</a> potentials <a class="el" href="citelist.html#CITEREF_gil2015enhanced">[22]</a> .</p>
<h1><a class="anchor" id="moving-Groups"></a>
Groups</h1>
<p>In PLUMED 1 groups (lists) were used for two tasks:</p><ul>
<li>To provide centers of masses to collective variables such as distances, angles, etc. This is now done by defining virtual atoms using either <a class="el" href="_c_e_n_t_e_r.html">CENTER</a> or <a class="el" href="_c_o_m.html">COM</a></li>
<li>To provide lists of atoms to collective variables such as coordination, gyration radius, etc. This is now done directly in the line that defines the collective variable.</li>
</ul>
<p>If you would still like to use groups you can use the <a class="el" href="_g_r_o_u_p.html">GROUP</a> commands. Whenever the label for a <a class="el" href="_g_r_o_u_p.html">GROUP</a> action appears in the input it is replaced by the list of atoms that were specified in the <a class="el" href="_g_r_o_u_p.html">GROUP</a>.</p>
<p>A restraint on the distance between centers of mass in PLUMED 1 was something like: </p><pre class="fragment">DISTANCE LIST &lt;g1&gt; &lt;g2&gt;
g1-&gt;
17 20 22 30
g1&lt;-
g2-&gt;
LOOP 37 40
g2&lt;-
UMBRELLA CV 1 KAPPA 200 AT 1.0
PRINT W_STRIDE 100
</pre><p> The same in PLUMED 2.x reads: </p><pre class="fragment">g1: COM ATOMS=17,20,22,30
g2: COM ATOMS=37-40
d:  DISTANCE ATOMS=g1,g2
r:  RESTRAINT ARG=d KAPPA=200 AT=1.0
PRINT STRIDE=100 FILE=COLVAR ARG=d,r.*
</pre><p>Notice that virtual atoms are very powerful tools in PLUMED 2. Actually, they can be used in any collective variable where normal atoms can be used, just by calling them by name. This allows to straightforwardly define variables such as coordination between centers of mass, which would have required an ad hoc implementation in PLUMED 1.</p>
<p>In the example above you can also appreciate the advantage of calling collective variables by name. It is obvious here that <a class="el" href="_r_e_s_t_r_a_i_n_t.html">RESTRAINT</a> is acting on distance <code>d</code>, whereas in PLUMED 1 one had to keep track of the number of the collective variables. This was easy for a single collective variable, but could become cumbersome for complex input files.</p>
<h1><a class="anchor" id="moving-Names"></a>
Names in output files</h1>
<p>Another advantage of having names is that when PLUMED produces an output file it can insert explicit names in the file. Consider for example this PLUMED 1 input </p><pre class="fragment">DISTANCE LIST 1 2
ANGLE    LIST 3 4 5
PRINT W_STRIDE 100
</pre><p> The first line of the COLVAR file was then </p><pre class="fragment">#!  FIELDS time cv1 cv2
</pre><p> The equivalent input file in PLUMED 2 is </p><pre class="fragment">d: DISTANCE ATOMS=1,2
a: ANGLE    ATOMS=3,4,5
PRINT ARG=d,a FILE=COLVAR STRIDE=100
</pre><p> The first line of the COLVAR file now is </p><pre class="fragment">#! FIELDS time d a
</pre><p> This makes it easy to remember what's the meaning of each column of the COLVAR file without the need to always go back to the PLUMED input to check in which order the variables were declared.</p>
<h1><a class="anchor" id="moving-Units"></a>
Units</h1>
<p>In PLUMED 1 the input file of PLUMED was expected to be written using the same units of the MD code. This choice was made to allow users to adopt the same units they were used to. However, we realized later that this choice was not allowing the PLUMED input files to be ported between different MD code. Let's say that one was using this keyword with GROMACS (kj/mol - nm) </p><pre class="fragment">UMBRELLA CV 1 KAPPA 200 AT 1.0
</pre><p> Let's assume the variable CV 1 was a distance. The same keyword in NAMD (kcal/mol - A) should have been converted to </p><pre class="fragment">UMBRELLA CV 1 KAPPA .4780 AT 10.0
</pre><p> The conversion of <code>AT</code> is straightforward (1nm=10A), but the conversion on <code>KAPPA</code> is more error prone. This is because <code>KAPPA</code> is measured in units of energy divided by distance squared. Notice that a different factor should have been used if the CV was an angle.</p>
<p>Learning from this, we designed PLUMED 2 in a way that units in the PLUMED input are independent of the MD code. Technically, this is achieved by doing the conversion when coordinates and forces are passed back and forth. In this way, the same PLUMED input could be used with GROMACS and NAMD.</p>
<p>We decided to use as standard units in PLUMED kj/mol, nm, and ps. Perhaps this is because most of the developers are using GROMACS, which also adopts these units. However, we still allow the personalization of units by means of the <a class="el" href="_u_n_i_t_s.html">UNITS</a> keyword. Since this keyword is included directly in the PLUMED input file, even when using personalized units the input files remains perfectly portable across different MD engines.</p>
<h1><a class="anchor" id="moving-Directives"></a>
Directives</h1>
<p>What follows is a list of all the documented directives of PLUMED 1 together with their plumed 2 equivalents. Be aware that the input syntaxes for these directives are not totally equivalent. You should read the documentation for the PLUMED 2 Action.</p>
<table class="doxtable">
<tr>
<td>HILLS  </td><td><a class="el" href="_m_e_t_a_d.html">METAD</a>   </td></tr>
<tr>
<td>WELLTEMPERED  </td><td><a class="el" href="_m_e_t_a_d.html">METAD</a> with BIASFACTOR   </td></tr>
<tr>
<td>GRID  </td><td><a class="el" href="_m_e_t_a_d.html">METAD</a> with GRID_MIN, GRID_MAX, and GRID_BIN   </td></tr>
<tr>
<td>WRITE_GRID  </td><td><a class="el" href="_m_e_t_a_d.html">METAD</a> with GRID_WFILE, GRID_WSTRIDE   </td></tr>
<tr>
<td>READ_GRID  </td><td><b> currently missing </b>   </td></tr>
<tr>
<td>MULTIPLE_WALKERS  </td><td><a class="el" href="_m_e_t_a_d.html">METAD</a> with options WALKERS_ID, WALKERS_N, WALKERS_DIR, and WALKERS_RSTRIDE   </td></tr>
<tr>
<td>NOHILLS  </td><td>not needed (collective variables are not biased by default)   </td></tr>
<tr>
<td>INTERVAL  </td><td><a class="el" href="_m_e_t_a_d.html">METAD</a> with INTERVAL   </td></tr>
<tr>
<td>INVERT  </td><td><b> currently missing </b>   </td></tr>
<tr>
<td>PTMETAD  </td><td>not needed (replica exchange detected from MD engine)   </td></tr>
<tr>
<td>BIASXMD  </td><td>not needed (replica exchange detected from MD engine); one should anyway use <a class="el" href="_r_a_n_d_o_m__e_x_c_h_a_n_g_e_s.html">RANDOM_EXCHANGES</a> to get the normal behavior   </td></tr>
<tr>
<td>UMBRELLA  </td><td><a class="el" href="_r_e_s_t_r_a_i_n_t.html">RESTRAINT</a>   </td></tr>
<tr>
<td>STEER  </td><td><a class="el" href="_m_o_v_i_n_g_r_e_s_t_r_a_i_n_t.html">MOVINGRESTRAINT</a>   </td></tr>
<tr>
<td>STEERPLAN  </td><td><a class="el" href="_m_o_v_i_n_g_r_e_s_t_r_a_i_n_t.html">MOVINGRESTRAINT</a>   </td></tr>
<tr>
<td>ABMD  </td><td><a class="el" href="_a_b_m_d.html">ABMD</a>   </td></tr>
<tr>
<td>UWALL  </td><td><a class="el" href="_u_p_p_e_r__w_a_l_l_s.html">UPPER_WALLS</a>   </td></tr>
<tr>
<td>LWALL  </td><td><a class="el" href="_l_o_w_e_r__w_a_l_l_s.html">LOWER_WALLS</a>   </td></tr>
<tr>
<td>EXTERNAL  </td><td><a class="el" href="_e_x_t_e_r_n_a_l.html">EXTERNAL</a>   </td></tr>
<tr>
<td>COMMITMENT  </td><td><a class="el" href="_c_o_m_m_i_t_t_o_r.html">COMMITTOR</a>   </td></tr>
<tr>
<td>PROJ_GRAD  </td><td><a class="el" href="_d_u_m_p_p_r_o_j_e_c_t_i_o_n_s.html">DUMPPROJECTIONS</a>   </td></tr>
<tr>
<td>DAFED  </td><td>a similar method using a Langevin thermostat, with <a class="el" href="_e_x_t_e_n_d_e_d__l_a_g_r_a_n_g_i_a_n.html">EXTENDED_LAGRANGIAN</a>   </td></tr>
<tr>
<td>DISTANCE  </td><td><a class="el" href="_d_i_s_t_a_n_c_e.html">DISTANCE</a>   </td></tr>
<tr>
<td>POSITION  </td><td><a class="el" href="_p_o_s_i_t_i_o_n.html">POSITION</a>   </td></tr>
<tr>
<td>MINDIST  </td><td><a class="el" href="_d_i_s_t_a_n_c_e_s.html">DISTANCES</a> with keyword MIN   </td></tr>
<tr>
<td>ANGLE  </td><td><a class="el" href="_a_n_g_l_e.html">ANGLE</a>   </td></tr>
<tr>
<td>TORSION  </td><td><a class="el" href="_t_o_r_s_i_o_n.html">TORSION</a>   </td></tr>
<tr>
<td>COORD  </td><td><a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n.html">COORDINATION</a>   </td></tr>
<tr>
<td>HBOND  </td><td><b> currently missing </b>, can be emulated with <a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n.html">COORDINATION</a>   </td></tr>
<tr>
<td>WATERBRIDGE  </td><td><a class="el" href="_b_r_i_d_g_e.html">BRIDGE</a>   </td></tr>
<tr>
<td>RGYR  </td><td><a class="el" href="_g_y_r_a_t_i_o_n.html">GYRATION</a>   </td></tr>
<tr>
<td>DIPOLE  </td><td><a class="el" href="_d_i_p_o_l_e.html">DIPOLE</a>   </td></tr>
<tr>
<td>DIHCOR  </td><td><a class="el" href="_d_i_h_c_o_r.html">DIHCOR</a>   </td></tr>
<tr>
<td>ALPHABETA  </td><td><a class="el" href="_a_l_p_h_a_b_e_t_a.html">ALPHABETA</a>   </td></tr>
<tr>
<td>ALPHARMSD  </td><td><a class="el" href="_a_l_p_h_a_r_m_s_d.html">ALPHARMSD</a>   </td></tr>
<tr>
<td>ANTIBETARMSD  </td><td><a class="el" href="_a_n_t_i_b_e_t_a_r_m_s_d.html">ANTIBETARMSD</a>   </td></tr>
<tr>
<td>PARABETARMSD  </td><td><a class="el" href="_p_a_r_a_b_e_t_a_r_m_s_d.html">PARABETARMSD</a>   </td></tr>
<tr>
<td>ELSTPOT  </td><td><b> currently missing </b>   </td></tr>
<tr>
<td>PUCKERING  </td><td><a class="el" href="_p_u_c_k_e_r_i_n_g.html">PUCKERING</a> (5 membered rings only)   </td></tr>
<tr>
<td>S_PATH  </td><td><a class="el" href="_p_a_t_h_m_s_d.html">PATHMSD</a>, s component   </td></tr>
<tr>
<td>Z_PATH  </td><td><a class="el" href="_p_a_t_h_m_s_d.html">PATHMSD</a>, z component   </td></tr>
<tr>
<td>TARGETED  </td><td><a class="el" href="_r_m_s_d.html">RMSD</a>   </td></tr>
<tr>
<td>ENERGY  </td><td><a class="el" href="_e_n_e_r_g_y.html">ENERGY</a>   </td></tr>
<tr>
<td>HELIX  </td><td><b> currently missing </b>   </td></tr>
<tr>
<td>PCA  </td><td><a class="el" href="_p_c_a_r_m_s_d.html">PCARMSD</a>   </td></tr>
<tr>
<td>SPRINT  </td><td><a class="el" href="_s_p_r_i_n_t.html">SPRINT</a>   </td></tr>
<tr>
<td>RDF  </td><td><a class="el" href="_d_i_s_t_a_n_c_e_s.html">DISTANCES</a>, used in combination with HISTOGRAM / BETWEEN keyword   </td></tr>
<tr>
<td>ADF  </td><td><a class="el" href="_a_n_g_l_e_s.html">ANGLES</a>, used in combination with HISTOGRAM / BETWEEN keyword   </td></tr>
<tr>
<td>POLY  </td><td><a class="el" href="_c_o_m_b_i_n_e.html">COMBINE</a>   </td></tr>
<tr>
<td>FUNCTION  </td><td><a class="el" href="_m_a_t_h_e_v_a_l.html">MATHEVAL</a>   </td></tr>
<tr>
<td>ALIGN_ATOMS  </td><td><a class="el" href="_w_h_o_l_e_m_o_l_e_c_u_l_e_s.html">WHOLEMOLECULES</a>   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="navelem"><a class="el" href="tutorials.html">Tutorials</a></li>  -->
    <li class="footer">   <!--- Generated by -->
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
