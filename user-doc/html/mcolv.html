<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>PLUMED: MultiColvar</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table align="center" frame="void" width="98%" cellpadding="2%">
<tbody>
<tr style="height: 30px;">
<td valign="center"> &nbsp; <img src="pigeon.png" width="120"/></td>
<td style="padding-left: 0.2em;" width="74%"> <a href="http://www.plumed-code.org"> <img src="logo.png" width="400" /> </td>
<td style="padding-left: 0.2em;" align="right"> <a href="../../developer-doc/html/index.html"> <img src="user-logo.png" width="180" /> </a> </td>
</tr>
</tbody>
</table>
<!--
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUMED
   &#160;<span id="projectnumber">2.3.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
-->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home&#160;(cineca-2015)</span></a></li>
      <li><a href="_syntax.html"><span>Getting&#160;started</span></a></li>
      <li><a href="tutorials.html"><span>Tutorials</span></a></li>
      <li><a href="glossary.html"><span>Index&#160;of&#160;Actions</span></a></li>
      <li><a href="cineca.html"><span>Cineca</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mcolv.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MultiColvar </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Oftentimes, when you do not need one of the collective variables described elsewhere in the manual, what you want instead is a function of a distribution of collective variables of a particular type. For instance you might need to calculate a minimum distance or the number of coordination numbers greater than a 3.0. To avoid dupilcating the code to calculate an angle or distance many times and to make it easier to implement very complex collective variables PLUMED provides these sort of collective variables using so-called MultiColvars. MultiColvars are named in this way because a single PLUMED action can be used to calculate a number of different collective variables. For instance the <a class="el" href="_d_i_s_t_a_n_c_e_s.html">DISTANCES</a> action can be used to calculate the minimum distance, the number of distances less than a certain value, the number of distances within a certain range... A more detailed introduction to multicolvars is provided in this <a href="http://www.youtube.com/watch?v=iDvZmbWE5ps">10-minute video</a>. Descriptions of the various multicolvars that are implemented in PLUMED 2 are given below:</p>
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><a class="el" href="_a_n_g_l_e_s.html">ANGLES</a>  </td><td>Calculate functions of the distribution of angles .  </td></tr>
<tr>
<td width="5%"><a class="el" href="_b_r_i_d_g_e.html">BRIDGE</a>  </td><td>Calculate the number of atoms that bridge two parts of a structure  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n_n_u_m_b_e_r.html">COORDINATIONNUMBER</a>  </td><td>Calculate the coordination numbers of atoms so that you can then calculate functions of the distribution ofcoordination numbers such as the minimum, the number less than a certain quantity and so on.   </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_e_n_s_i_t_y.html">DENSITY</a>  </td><td>Calculate functions of the density of atoms as a function of the box. This allows one to calculatethe number of atoms in half the box.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_i_s_t_a_n_c_e_s.html">DISTANCES</a>  </td><td>Calculate the distances between one or many pairs of atoms. You can then calculate functions of the distribution ofdistances such as the minimum, the number less than a certain quantity and so on.   </td></tr>
<tr>
<td width="5%"><a class="el" href="_f_c_c_u_b_i_c.html">FCCUBIC</a>  </td><td></td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_p_l_a_n_e_d_i_s_t_a_n_c_e_s.html">INPLANEDISTANCES</a>  </td><td>Calculate distances in the plane perpendicular to an axis  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_o_l_e_c_u_l_e_s.html">MOLECULES</a>  </td><td>Calculate the vectors connecting a pair of atoms in order to represent the orientation of a molecule.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_p_l_a_n_e_s.html">PLANES</a>  </td><td>Calculate the plane perpendicular to two vectors in order to represent the orientation of a planar molecule.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q3.html">Q3</a>  </td><td>Calculate 3rd order Steinhardt parameters.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q4.html">Q4</a>  </td><td>Calculate 4th order Steinhardt parameters.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q6.html">Q6</a>  </td><td>Calculate 6th order Steinhardt parameters.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_s_i_m_p_l_e_c_u_b_i_c.html">SIMPLECUBIC</a>  </td><td>Calculate whether or not the coordination spheres of atoms are arranged as they would be in a simplecubic structure.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_e_t_r_a_h_e_d_r_a_l.html">TETRAHEDRAL</a>  </td><td>Calculate the degree to which the environment about ions has a tetrahedral order.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_o_r_s_i_o_n_s.html">TORSIONS</a>  </td><td>Calculate whether or not a set of torsional angles are within a particular range.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_x_d_i_s_t_a_n_c_e_s.html">XDISTANCES</a>  </td><td>Calculate the x components of the vectors connecting one or many pairs of atoms. You can then calculate functions of the distribution ofvalues such as the minimum, the number less than a certain quantity and so on.   </td></tr>
<tr>
<td width="5%"><a class="el" href="_x_y_d_i_s_t_a_n_c_e_s.html">XYDISTANCES</a>  </td><td>Calculate distance between a pair of atoms neglecting the z-component. You can then calculate functions of the distribution ofvalues such as the minimum, the number less than a certain quantity and so on.   </td></tr>
<tr>
<td width="5%"><a class="el" href="_x_z_d_i_s_t_a_n_c_e_s.html">XZDISTANCES</a>  </td><td>Calculate distance between a pair of atoms neglecting the y-component. You can then calculate functions of the distribution ofvalues such as the minimum, the number less than a certain quantity and so on.   </td></tr>
<tr>
<td width="5%"><a class="el" href="_y_d_i_s_t_a_n_c_e_s.html">YDISTANCES</a>  </td><td>Calculate the y components of the vectors connecting one or many pairs of atoms. You can then calculate functions of the distribution ofvalues such as the minimum, the number less than a certain quantity and so on.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_y_z_d_i_s_t_a_n_c_e_s.html">YZDISTANCES</a>  </td><td>Calculate distance between a pair of atoms neglecting the x-component. You can then calculate functions of the distribution ofvalues such as the minimum, the number less than a certain quantity and so on.   </td></tr>
<tr>
<td width="5%"><a class="el" href="_z_d_i_s_t_a_n_c_e_s.html">ZDISTANCES</a>  </td><td>Calculate the z components of the vectors connecting one or many pairs of atoms. You can then calculate functions of the distribution ofvalues such as the minimum, the number less than a certain quantity and so on.  </td></tr>
</table>
<p>To instruct PLUMED to calculate a multicolvar you give an instruction that looks something like this:</p>
<pre class="fragment">NAME &lt;atoms involved&gt; &lt;parameters&gt; &lt;what am I calculating&gt; TOL=0.001 LABEL=label
</pre><p>Oftentimes the simplest way to specify the atoms involved is to use multiple instances of the ATOMS keyword i.e. ATOMS1, ATOMS2, ATOMS3,... Separate instances of the quantity specified by NAME are then calculated for each of the sets of atoms. For example if the command issued contains the following:</p>
<pre class="fragment">DISTANCES ATOMS1=1,2 ATOMS2=3,4 ATOMS3=5,6
</pre><p>The distances between atoms 1 and 2, atoms 3 and 4, and atoms 5 and 6 are calculated. Obviously, generating this sort of input is rather tedious so short cuts are also available many of the collective variables. These are described on the manual pages for the actions.</p>
<p>After specifying the atoms involved you sometimes need to specify some parameters that required in the calculation. For instance, for <a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n_n_u_m_b_e_r.html">COORDINATIONNUMBER</a> - the number of atoms in the first coordination sphere of each of the atoms in the system - you need to specify the parameters for a <a class="el" href="switchingfunction.html">switchingfunction</a> that will tell us whether or not an atom is in the first coordination sphere. Details as to how to do this are provided on the manual pages.</p>
<p>One of the most important keywords for multicolvars is the TOL keyword. This specifies that terms in sums that contribute less than a certain value can be ignored. In addition, it is assumed that the derivative with respect to these terms are essentially zero. By increasing the TOL parameter you can increase the speed of the calculation. Be aware, however, that this increase in speed is only possible because you are lowering the accuracy with which you are computing the quantity of interest.</p>
<p>Once you have specified the base quanties that are to be calculated from the atoms involved and any parameters you need to specify what function of these base quanties is to be calculated. For most multicolvars you can calculate the minimum, the number less than a target value, the number within a certain range, the number more than a target value and the average value directly.</p>
<h1><a class="anchor" id="multicolvarfunction"></a>
MultiColvar functions</h1>
<p>As well as the relatively simple quantities described above more complex functions of the distribution of values for the base colvars can be computed by employing multicolvars in conjuction with the following actions:</p>
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><a class="el" href="_a_r_o_u_n_d.html">AROUND</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a particular, user-specified part of of the cell.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_a_v_i_t_y.html">CAVITY</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a box defined by the positions of four atoms.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_c_y_l_i_n_d_e_r.html">INCYLINDER</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a particular, user-specified part of of the cell.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_s_p_h_e_r_e.html">INSPHERE</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a particular, user-specified part of of the cell.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__a_v_e_r_a_g_e.html">LOCAL_AVERAGE</a>  </td><td>Calculate averages over spherical regions centered on atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__q3.html">LOCAL_Q3</a>  </td><td>Calculate the local degree of order around an atoms by taking the average dot product between the \(q_3\) vector on the central atom and the \(q_3\) vectoron the atoms in the first coordination sphere.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__q4.html">LOCAL_Q4</a>  </td><td>Calculate the local degree of order around an atoms by taking the average dot product between the \(q_4\) vector on the central atom and the \(q_4\) vectoron the atoms in the first coordination sphere.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__q6.html">LOCAL_Q6</a>  </td><td>Calculate the local degree of order around an atoms by taking the average dot product between the \(q_6\) vector on the central atom and the \(q_6\) vectoron the atoms in the first coordination sphere.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_f_i_l_t_e_r__b_e_t_w_e_e_n.html">MFILTER_BETWEEN</a>  </td><td>This action can be used to filter the distribution of colvar values in a multicolvar so that one can compute the mean and so on for only those multicolvars within a certain range.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_f_i_l_t_e_r__l_e_s_s.html">MFILTER_LESS</a>  </td><td>This action can be used to filter the distribution of colvar values in a multicolvar so that one can compute the mean and so on for only those multicolvars less than a tolerance.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_f_i_l_t_e_r__m_o_r_e.html">MFILTER_MORE</a>  </td><td>This action can be used to filter the distribution of colvar values in a multicolvar so that one can compute the mean and so on for only those multicolvars more than a tolerance.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_n_l_i_n_k_s.html">NLINKS</a>  </td><td>Calculate number of pairs of atoms/molecules that are "linked"  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_e_t_r_a_h_e_d_r_a_l_p_o_r_e.html">TETRAHEDRALPORE</a>  </td><td></td></tr>
</table>
<h1><a class="anchor" id="multicolvarbias"></a>
MultiColvar bias</h1>
<p>There may be occasitions when you want add restraints on many collective variables. For instance if you are studying a cluster you might want to add a wall on the distances between each of the atoms and the center of mass of the cluster in order to prevent the cluster subliming. Alternatively, you may wish to insist that a particular set of atoms in your system all have a coordination number greater than 2. You can add these sorts of restraints by employing the following biases, which all act on the set of collective variable values calculated by a multicolvar. So for example the following set of commands:</p>
<pre class="fragment">COM ATOMS=1-20 LABEL=c1
DISTANCES GROUPA=c1 GROUPB=1-20 LABEL=d1
UWALLS DATA=d1 AT=2.5 KAPPA=0.2 LABEL=sr
</pre><p>creates the aforementioned set of restraints on the distances between the 20 atoms in a cluster and the center of mass of the cluster.</p>
<p>The list of biases of this type are as follows:</p>
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><a class="el" href="_u_w_a_l_l_s.html">UWALLS</a>  </td><td>Add <a class="el" href="_u_p_p_e_r__w_a_l_l_s.html">UPPER_WALLS</a> restraints on all the multicolvar values  </td></tr>
</table>
<p>Notice that (in theory) you could also use this functionality to add additional terms to your forcefield or to implement your forcefield. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="navelem"><a class="el" href="colvarintro.html">Collective variables</a></li>  -->
    <li class="footer">   <!--- Generated by -->
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
